<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>CPSC 490</title>
    <script type="text/javascript" src="d3.js"></script>
    <script type="module">
      import { transition } from "https://cdn.skypack.dev/d3-transition@3";

      const t = transition();
    </script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="rs-style.css">
  </head>
  <body>
    <h1>CPSC 490</h1>
    <div class="caption">
      <p>
        Public Libraries Survey data from 1998 to 2020 from the
        <a href="https://www.imls.gov/research-evaluation/data-collection/public-libraries-survey"
          >Public Libraries Survey</a> conducted by the <a href="https://www.imls.gov/">Institute of Museum and Library Services</a>.
      </p>
      <p>
        <strong
          >Use the slider to view data from different years and the dropdown to select various statistics.</strong
        >
      </p>
    </div>
    <p>
      <input
        class="genderFilter"
        type="radio"
        name="filterPreset"
        value="clear"
        checked="true"
      />
      All
      <input
        class="genderFilter"
        type="radio"
        name="filterPreset"
        value="female"
      />
      Female
      <input
        class="genderFilter"
        type="radio"
        name="filterPreset"
        value="male"
      />
      Male
    </p>
    <script type="text/javascript" src="state-pls-sum-data.js"></script>
    <script type="text/javascript" src="state-pls-sum-data-range.js"></script>
    <script type="text/javascript" src="pls-stat-units.js"></script>
    <script type="text/javascript" src="name-abbr.js"></script>
    <div class="range-slider">
      <!-- courtesy of https://codepen.io/mayuMPH/pen/ZjxGEY -->
      <input id="rs-range-line" class="rs-range" type="range" value="2020" min="1998" max="2020">
    </div>
    <div class="box-minmax">
      <span>1998</span><span>2020</span>
    </div>
    <script type="text/javascript">
      let yearSlider = document.getElementById("rs-range-line");
      yearSlider.addEventListener("input", showSliderValue, false);

      function showSliderValue() {
        document.getElementById("year-text").innerHTML = yearSlider.value;
        changeYear(yearSlider.value);
      }

    </script>
    <select name="statistic" id="map-dropdown">
      <option value="VISITS">Visits</option>
      <option value="REFERENC">Reference Transactions</option>
      <option value="REGBOR">Registered Borrowers</option>
      <option value="BKVOL">Print Materials</option>
      <option value="TOTINCM">Income</option>
      <option value="TOTOPEXP">Operating Expenditure</option>
      <option value="TOTCIR">Circulation</option>
      <option value="HRS_OPEN">Service Hours</option>
    </select>
    <script type="text/javascript">
      let statSelector = document.getElementById("map-dropdown");
      statSelector.addEventListener("input", toggleStatistic, false);
      function toggleStatistic() {
        let statNameElt = document.getElementById("stat-name");
        switch (statSelector.value) {
          case 'VISITS': statNameElt.innerHTML = 'visits'; break;
          case 'REFERENC': statNameElt.innerHTML = 'reference transactions'; break;
          case 'REGBOR': statNameElt.innerHTML = 'registered borrowers'; break;
          case 'BKVOL': statNameElt.innerHTML = 'print materials'; break;
          case 'TOTINCM': statNameElt.innerHTML = 'dollars in income'; break;
          case 'TOTOPEXP': statNameElt.innerHTML = 'dollars in expenditure'; break;
          case 'TOTCIR': statNameElt.innerHTML = 'circulation transactions'; break;
          case 'HRS_OPEN': statNameElt.innerHTML = 'service hours'; break;
        }
        changeStatistic(statSelector.value);
      }

    </script>
    <script type="text/javascript" src="v1.js"></script>
    <div id="statetooltip">
      <p>
        <strong><span id="statename">United States</span></strong>
      </p>
      <p>
        <span id="stat-value">732,356,964</span>
        total <span id="stat-name">visits</span> in <span id="year-text">2020</span>
      </p>
    </div>

    <div id="tooltip" class="hidden">
      <p>
        <strong><span id="tooltipname">name</span></strong>
      </p>
      <p>
        <span id="age">00</span>-y.o. <span id="race">race</span
        ><span id="gender">gender</span>
      </p>
      <p>
        <em><span id="date">date</span></em>
      </p>
    </div>
    <div id="tooltip2" class="hidden">
      <p>
        <strong><span id="num">n</span></strong>
        <span id="racial">race</span> deaths in <span id="year">year</span>
      </p>
    </div>
    <div id="tooltip3" class="hidden">
      <p>
        <strong
          ><span id="gendergroup">gender</span>
          <span id="agegroup">age</span></strong
        >
      </p>
      <p><span id="cases">n</span> deaths</p>
    </div>
    
  </body>
</html>
